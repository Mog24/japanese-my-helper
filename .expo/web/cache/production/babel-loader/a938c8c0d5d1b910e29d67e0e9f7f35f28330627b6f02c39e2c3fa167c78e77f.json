{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState}from\"react\";import{Divider,Input,Layout,List,ListItem,Text}from\"@ui-kitten/components\";import*as SecureStore from\"expo-secure-store\";import{useFocusEffect}from\"@react-navigation/native\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var HomeScreen=function HomeScreen(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),savedData=_useState2[0],setSavedData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),filteredData=_useState4[0],setFilteredData=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),filterBy=_useState6[0],setFilterBy=_useState6[1];useFocusEffect(React.useCallback(function(){var getDataFromAsyncStorage=function(){var _ref=_asyncToGenerator(function*(){var data=yield SecureStore.getItemAsync(\"translation-data\");setSavedData(JSON.parse(data));setFilteredData(JSON.parse(data));});return function getDataFromAsyncStorage(){return _ref.apply(this,arguments);};}();getDataFromAsyncStorage();},[]));var onDeleteItem=function(){var _ref2=_asyncToGenerator(function*(id){try{var dataToStore=savedData.filter(function(data){return data.id!==id;});yield SecureStore.setItemAsync(\"translation-data\",JSON.stringify(dataToStore));setSavedData(dataToStore);setFilteredData(dataToStore);}catch(e){console.log(\"catch error\",e);}});return function onDeleteItem(_x){return _ref2.apply(this,arguments);};}();var onFilterChange=function onFilterChange(text){setFilterBy(text);if(text===\"\"){setFilteredData(savedData);}else{var textRegExp=new RegExp(text.toLowerCase());setFilteredData(function(prevData){return prevData.filter(function(data){return textRegExp.test(data.italianTranslation.toLowerCase());});});}};return _jsxs(Layout,{style:{flex:1,padding:16,paddingTop:36},children:[_jsx(Text,{category:\"h1\",children:\"Home\"}),_jsx(Input,{value:filterBy,placeholder:\"Cerca\",onChangeText:onFilterChange,style:{marginVertical:10}}),(filteredData==null?void 0:filteredData.length)>0?_jsx(List,{style:{maxHeight:600},data:filteredData,ItemSeparatorComponent:Divider,renderItem:function renderItem(_ref3){var item=_ref3.item;return _jsxs(ListItem,{onLongPress:function onLongPress(){return onDeleteItem(item.id);},style:{display:\"flex\",flexDirection:\"row\",alignItems:\"center\",justifyContent:\"space-between\",flexWrap:\"wrap\"},children:[_jsx(Text,{style:{fontSize:20},children:item.italianTranslation}),_jsx(Text,{style:{fontSize:20},children:item.kanji}),_jsx(Text,{style:{fontSize:20},children:item.pronunciation})]},item.id);}}):null]});};","map":{"version":3,"names":["React","useState","Divider","Input","Layout","List","ListItem","Text","SecureStore","useFocusEffect","jsx","_jsx","jsxs","_jsxs","HomeScreen","_useState","_useState2","_slicedToArray","savedData","setSavedData","_useState3","_useState4","filteredData","setFilteredData","_useState5","_useState6","filterBy","setFilterBy","useCallback","getDataFromAsyncStorage","_ref","_asyncToGenerator","data","getItemAsync","JSON","parse","apply","arguments","onDeleteItem","_ref2","id","dataToStore","filter","setItemAsync","stringify","e","console","log","_x","onFilterChange","text","textRegExp","RegExp","toLowerCase","prevData","test","italianTranslation","style","flex","padding","paddingTop","children","category","value","placeholder","onChangeText","marginVertical","length","maxHeight","ItemSeparatorComponent","renderItem","_ref3","item","onLongPress","display","flexDirection","alignItems","justifyContent","flexWrap","fontSize","kanji","pronunciation"],"sources":["C:/Users/micfi/Documents/Programming/japanese-my-helper/screens/HomeScreen.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  Divider,\r\n  Input,\r\n  Layout,\r\n  List,\r\n  ListItem,\r\n  Text,\r\n} from \"@ui-kitten/components\";\r\nimport * as SecureStore from \"expo-secure-store\";\r\nimport { useFocusEffect } from \"@react-navigation/native\";\r\nimport { TouchableOpacity, TouchableWithoutFeedback } from \"react-native\";\r\n\r\nexport const HomeScreen = () => {\r\n  const [savedData, setSavedData] = useState<Data[] | null>(null);\r\n  const [filteredData, setFilteredData] = useState<Data[] | null>(null);\r\n  const [filterBy, setFilterBy] = useState(\"\");\r\n\r\n  // Read data from SecureStorage and display it\r\n  useFocusEffect(\r\n    React.useCallback(() => {\r\n      const getDataFromAsyncStorage = async () => {\r\n        const data = await SecureStore.getItemAsync(\"translation-data\");\r\n        // console.log(\"data\", data);\r\n        setSavedData(JSON.parse(data));\r\n        setFilteredData(JSON.parse(data));\r\n      };\r\n\r\n      getDataFromAsyncStorage();\r\n    }, [])\r\n  );\r\n\r\n  const onDeleteItem = async (id: number) => {\r\n    try {\r\n      const dataToStore = savedData.filter((data) => data.id !== id);\r\n      await SecureStore.setItemAsync(\r\n        \"translation-data\",\r\n        JSON.stringify(dataToStore)\r\n      );\r\n      setSavedData(dataToStore);\r\n      setFilteredData(dataToStore);\r\n    } catch (e) {\r\n      // saving error\r\n      console.log(\"catch error\", e);\r\n    }\r\n  };\r\n\r\n  const onFilterChange = (text: string) => {\r\n    setFilterBy(text);\r\n    // restore the default if the text is empty\r\n    if (text === \"\") {\r\n      setFilteredData(savedData);\r\n    } else {\r\n      const textRegExp = new RegExp(text.toLowerCase());\r\n      setFilteredData((prevData) =>\r\n        prevData.filter((data) =>\r\n          textRegExp.test(data.italianTranslation.toLowerCase())\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout style={{ flex: 1, padding: 16, paddingTop: 36 }}>\r\n      <Text category=\"h1\">Home</Text>\r\n\r\n      <Input\r\n        value={filterBy}\r\n        placeholder=\"Cerca\"\r\n        onChangeText={onFilterChange}\r\n        style={{ marginVertical: 10 }}\r\n      />\r\n\r\n      {filteredData?.length > 0 ? (\r\n        <List\r\n          style={{ maxHeight: 600 }}\r\n          data={filteredData}\r\n          ItemSeparatorComponent={Divider}\r\n          renderItem={({ item }: { item: Data }): React.ReactElement => (\r\n            <ListItem\r\n              key={item.id}\r\n              onLongPress={() => onDeleteItem(item.id)}\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"space-between\",\r\n                flexWrap: \"wrap\",\r\n              }}\r\n            >\r\n              <Text style={{ fontSize: 20 }}>{item.italianTranslation}</Text>\r\n              <Text style={{ fontSize: 20 }}>{item.kanji}</Text>\r\n              <Text style={{ fontSize: 20 }}>{item.pronunciation}</Text>\r\n            </ListItem>\r\n          )}\r\n        />\r\n      ) : null}\r\n    </Layout>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}