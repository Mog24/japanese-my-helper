{"ast":null,"code":"\"use strict\";var _objectWithoutProperties=require(\"@babel/runtime/helpers/objectWithoutProperties\");var _defineProperty=require(\"@babel/runtime/helpers/defineProperty\");var _reactJsxRuntime=require(\"react/jsx-runtime\");var _classCallCheck=require(\"@babel/runtime/helpers/classCallCheck\");var _createClass=require(\"@babel/runtime/helpers/createClass\");var _inherits=require(\"@babel/runtime/helpers/inherits\");var _possibleConstructorReturn=require(\"@babel/runtime/helpers/possibleConstructorReturn\");var _getPrototypeOf=require(\"@babel/runtime/helpers/getPrototypeOf\");var _excluded=[\"children\"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.MenuGroup=void 0;var react_1=__importDefault(require(\"react\"));var react_native_1=require(\"react-native-web/dist/index\");var devsupport_1=require(\"../../devsupport\");var chevronDown_component_1=require(\"../shared/chevronDown.component\");var menuItem_component_1=require(\"./menuItem.component\");var CHEVRON_DEG_COLLAPSED=-180;var CHEVRON_DEG_EXPANDED=0;var CHEVRON_ANIM_DURATION=200;var POSITION_OUTSCREEN=devsupport_1.Point.outscreen();var MenuGroup=function(_react_1$default$Comp){_inherits(MenuGroup,_react_1$default$Comp);var _super=_createSuper(MenuGroup);function MenuGroup(props){var _this;_classCallCheck(this,MenuGroup);_this=_super.call(this,props);_this.state={submenuHeight:1};_this.expandAnimation=new react_native_1.Animated.Value(0);_this.onPress=function(descriptor,event){if(_this.hasSubmenu){_this.initiallyExpanded=false;var expandValue=_this.expandAnimationValue>0?0:_this.state.submenuHeight;_this.createExpandAnimation(expandValue).start();_this.props.onPress==null?void 0:_this.props.onPress(descriptor,event);}};_this.onSubmenuMeasure=function(frame){_this.setState({submenuHeight:frame.size.height});};_this.createExpandAnimation=function(toValue){return react_native_1.Animated.timing(_this.expandAnimation,{toValue:toValue,duration:CHEVRON_ANIM_DURATION,useNativeDriver:false});};_this.renderAccessoryIfNeeded=function(evaProps){if(!_this.hasSubmenu){return null;}var style=react_native_1.StyleSheet.flatten(evaProps.style);return _reactJsxRuntime.jsx(react_native_1.Animated.View,{style:{transform:[{rotate:_this.expandToRotateInterpolation}]},children:_reactJsxRuntime.jsx(chevronDown_component_1.ChevronDown,_objectSpread(_objectSpread({},evaProps),{},{fill:style.tintColor}))});};_this.renderItemsWithDefaultProps=function(){return react_1.default.Children.map(_this.props.children,function(item){return react_1.default.cloneElement(item,_this.defaultItemProps,null);});};_this.renderGroupedItems=function(evaStyle){return _reactJsxRuntime.jsx(react_native_1.Animated.View,{style:[styles.submenu,_this.submenuStyle,evaStyle],children:_this.renderItemsWithDefaultProps()});};_this.renderMeasuringGroupedItems=function(evaStyle){return _reactJsxRuntime.jsx(devsupport_1.MeasureElement,{onMeasure:_this.onSubmenuMeasure,children:_this.renderGroupedItems(evaStyle)});};_this.renderGroupedItemsIfNeeded=function(evaStyle){if(!_this.hasSubmenu){return null;}if(_this.shouldMeasureSubmenu){return _this.renderMeasuringGroupedItems(evaStyle);}return _this.renderGroupedItems(evaStyle);};_this.initiallyExpanded=props.initiallyExpanded;return _this;}_createClass(MenuGroup,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var submenuHeightChanged=this.state.submenuHeight!==prevState.submenuHeight;if(submenuHeightChanged&&this.hasSubmenu&&this.initiallyExpanded){this.expandAnimation.setValue(this.state.submenuHeight);}}},{key:\"hasSubmenu\",get:function get(){return react_1.default.Children.count(this.props.children)>0;}},{key:\"shouldMeasureSubmenu\",get:function get(){return this.state.submenuHeight===1;}},{key:\"expandAnimationValue\",get:function get(){return this.expandAnimation._value;}},{key:\"expandToRotateInterpolation\",get:function get(){return this.expandAnimation.interpolate({inputRange:[-this.state.submenuHeight,CHEVRON_DEG_EXPANDED],outputRange:[`${CHEVRON_DEG_COLLAPSED}deg`,`${CHEVRON_DEG_EXPANDED}deg`]});}},{key:\"submenuStyle\",get:function get(){return this.shouldMeasureSubmenu?styles.outscreen:{height:this.expandAnimation};}},{key:\"defaultItemProps\",get:function get(){return{appearance:'grouped'};}},{key:\"render\",value:function render(){var _this$props=this.props,children=_this$props.children,itemProps=_objectWithoutProperties(_this$props,_excluded);return _reactJsxRuntime.jsxs(_reactJsxRuntime.Fragment,{children:[_reactJsxRuntime.jsx(menuItem_component_1.MenuItem,_objectSpread(_objectSpread({accessoryRight:this.renderAccessoryIfNeeded},itemProps),{},{onPress:this.onPress})),this.renderGroupedItemsIfNeeded({})]});}}]);return MenuGroup;}(react_1.default.Component);exports.MenuGroup=MenuGroup;var styles=react_native_1.StyleSheet.create({outscreen:{position:'absolute',left:POSITION_OUTSCREEN.x,top:POSITION_OUTSCREEN.y},submenu:{overflow:'hidden'}});","map":{"version":3,"names":["react_1","__importDefault","require","react_native_1","devsupport_1","chevronDown_component_1","menuItem_component_1","CHEVRON_DEG_COLLAPSED","CHEVRON_DEG_EXPANDED","CHEVRON_ANIM_DURATION","POSITION_OUTSCREEN","Point","outscreen","MenuGroup","_react_1$default$Comp","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","submenuHeight","expandAnimation","Animated","Value","onPress","descriptor","event","hasSubmenu","initiallyExpanded","expandValue","expandAnimationValue","createExpandAnimation","start","onSubmenuMeasure","frame","setState","size","height","toValue","timing","duration","useNativeDriver","renderAccessoryIfNeeded","evaProps","style","StyleSheet","flatten","_reactJsxRuntime","jsx","View","transform","rotate","expandToRotateInterpolation","children","ChevronDown","_objectSpread","fill","tintColor","renderItemsWithDefaultProps","default","Children","map","item","cloneElement","defaultItemProps","renderGroupedItems","evaStyle","styles","submenu","submenuStyle","renderMeasuringGroupedItems","MeasureElement","onMeasure","renderGroupedItemsIfNeeded","shouldMeasureSubmenu","_createClass","key","value","componentDidUpdate","prevProps","prevState","submenuHeightChanged","setValue","get","count","_value","interpolate","inputRange","outputRange","appearance","render","_this$props","itemProps","_objectWithoutProperties","_excluded","jsxs","Fragment","MenuItem","accessoryRight","Component","exports","create","position","left","x","top","y","overflow"],"sources":["../../../../../src/components/ui/menu/menuGroup.component.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}